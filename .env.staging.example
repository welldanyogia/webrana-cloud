# ═══════════════════════════════════════════════════════════════════════════════
# WeBrana Cloud - Staging Environment Configuration
#
# USAGE:
# 1. Copy this file to .env: cp .env.staging.example .env
# 2. Update secrets with actual staging values
# 3. Run: docker-compose -f docker-compose.staging.yml up -d
# ═══════════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────────
# General Environment Settings
# ─────────────────────────────────────────────────────────────────────────────
NODE_ENV=staging
DEBUG=true
LOG_LEVEL=debug
SENTRY_ENV=staging

# ─────────────────────────────────────────────────────────────────────────────
# Database (PostgreSQL)
# ─────────────────────────────────────────────────────────────────────────────
# Host 'postgres-staging' matches the service name in docker-compose.staging.yml
DATABASE_HOST=postgres-staging
DATABASE_PORT=5432
DATABASE_USER=postgres
DATABASE_PASSWORD=postgres_staging_pass
DATABASE_NAME=webrana_staging

# Service-specific connection strings (using schemas for isolation)
DATABASE_URL_AUTH=postgresql://${DATABASE_USER}:${DATABASE_PASSWORD}@${DATABASE_HOST}:${DATABASE_PORT}/${DATABASE_NAME}?schema=auth
DATABASE_URL_CATALOG=postgresql://${DATABASE_USER}:${DATABASE_PASSWORD}@${DATABASE_HOST}:${DATABASE_PORT}/${DATABASE_NAME}?schema=catalog
DATABASE_URL_ORDER=postgresql://${DATABASE_USER}:${DATABASE_PASSWORD}@${DATABASE_HOST}:${DATABASE_PORT}/${DATABASE_NAME}?schema=order
DATABASE_URL_BILLING=postgresql://${DATABASE_USER}:${DATABASE_PASSWORD}@${DATABASE_HOST}:${DATABASE_PORT}/${DATABASE_NAME}?schema=billing
DATABASE_URL_NOTIFICATION=postgresql://${DATABASE_USER}:${DATABASE_PASSWORD}@${DATABASE_HOST}:${DATABASE_PORT}/${DATABASE_NAME}?schema=notification

# ─────────────────────────────────────────────────────────────────────────────
# Redis (Cache & Queues)
# ─────────────────────────────────────────────────────────────────────────────
REDIS_HOST=redis-staging
REDIS_PORT=6379
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}

# ─────────────────────────────────────────────────────────────────────────────
# Security & Authentication
# ─────────────────────────────────────────────────────────────────────────────
# JWT Configuration (RS256 for Staging/Prod)
JWT_ALGORITHM=RS256
# PEM format public/private keys (Generate with openssl)
JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsO/dmvRlgKzJUuw8qdMV\nNPREMCHYLNa7zgaz79e7+yMUM7HV/7CFebwPuVzUDC4GaspH
     HdG0oJYXXX4iwcen\nBdsAtYTIIE8OeTVWRZ8n6X6opFtn5kxpiaJNFje5z0B8gzkAwg+z0v43Bq1Mj
     1wV\nYnAr2cieo+KQzmgI7XCTFze4L/SkFCV7IV5GmZsweZbNIe8z74NNzhSdilttp9Ju\nmk8jyeQT
     HNI1GTpVNqc7bnUatd4Ei2IdwY4hxKbYWPmvaDPHBNm2j3BP2vFtIkOS\nROyIf4sBPpB8KNmjxR55o
     BT5IwNAZR0j6GYVVwtXP4CefdfCdIBlmSgZCMpTWorr\nWQIDAQAB\n-----END PUBLIC
     KEY-----"

     JWT_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIIEvAIBADANBgkqhkiG9w0BAQEFAASCB
     KYwggSiAgEAAoIBAQCw792a9GWArMlS\n7Dyp0xU09EQwIdgs1rvOBrPv17v7IxQzsdX/sIV5vA+5XN
     QMLgZqykcd0bSglhdd\nfiLBx6cF2wC1hMggTw55NVZFnyfpfqikW2fmTGmJok0WN7nPQHyDOQDCD7P
     S/jcG\nrUyPXBVicCvZyJ6j4pDOaAjtcJMXN7gv9KQUJXshXkaZmzB5ls0h7zPvg03OFJ2K\nW22n0m
     6aTyPJ5BMc0jUZOlU2pztudRq13gSLYh3BjiHEpthY+a9oM8cE2baPcE/a\n8W0iQ5JE7Ih/iwE+kHw
     o2aPFHnmgFPkjA0BlHSPoZhVXC1c/gJ5918J0gGWZKBkI\nylNaiutZAgMBAAECggEADCqUMfhZ5ecL
     qV1n3vQOHl/o8+fR2+Rwkb49f3GVwhMj\ni5nv+XbPeMNND/2Bcax1AcESsorVySCE7wdyN6GlOxZ35
     iNhGPKir8QygFNNLOWq\nDjIgUvJAZAfCVfOjPcxk+2dvJUjr4CddjIKcU/O8nzIQG9erC+ETfLPj4E
     LIRHVx\npFUwLUlSmPDB7ErHqEUtxTAp2N/BbH8CXNVmIgf62sX9TRRnOfH43IUx2TbF4YHp\netLMj
     55QdXPT8+WaKh4mTC+8U/Fkz1SacujGPZzSZuwPiVlV9pqoTlgezQ9d80yA\n9e44Sijy8Q1F1S8sgA
     3f6soXn+KT/L1sisF/Qi/ysQKBgQDl4LyL9sGVvzXRaEip\nglWiTLSmFtMpO3179Tf4DKw+XhT8jJq
     H2nCjLFm3nn8dCwwIWsKZ+I5jZc4/fkcS\n2kXFyi7eeRNLKhImOkZxKq1ZqnO2Tlx++4nPJL6axp7O
     3BAbPOVtpZVS5U0y7oaN\n/bIAhhRO6wTfn+jXU86PXQXxEQKBgQDFCw00C3BUV/2PnORLGeN7GLiLy
     PXi/Ln6\nGkEQyg81dFAiR2ir+4Iq8G6NQMAE3YvL69/lDqJFmEivFbjAUemt72U0ddWdmEJG\nbcMR
     0P8Cr3qetvG/qwOdAMlX7vHofilWViHmo0/E6W+fikUFvrxj6h1epaQQOiuB\nv4wvmnZVyQKBgEQHr
     WTygrnRW5j8dryLkNI2RyP8D0PdkjZUDNtAzNysNSPEbJsV\n3026+1Ym9tFeipISYhL1BxaNc2tA8M
     G4jPuK6TH3vOj6q2JazqwBCEpH8nSaXi9K\nO69s3Weqribj43RcIj2/yiA9MgqHopR05u/Wvj3YuZm
     AloTbDX9J9U8xAoGAdfRn\nswAl/leuMop5H3wf8VCbKRLkHz2rF00gJizPbfBzCBI3Vrz47zt+8pAQ
     Ytk9FpXd\nMgHQoljHKgiW0Io4mSb2LrFbbzv2cLLEU6YJAlKJ1PkvPs3hG9ucrEceCU9873Ig\nWTD
     qT7ZuW9Mp/oZvwGAltMLzs8MeyE0iXlzY+gECgYAR83Mk9iWNbufciCy341d1\nhteFKEhN4Mp52T3S
     LXsaPeRKw23i1eGOdyWViOJvx4LcBVqMzKI225IIo479qyxu\n2pS3yd7LtYNVLAnb30Z7G0rl/5KyU
     f6C01kBXtrRMXwsIf7g2v6yEtbA+bMoh6Jn\nHc3QRWE0FtaOossvIJ2vzw==\n-----END PRIVATE
      KEY-----"
# For services that need shared secrets
JWT_SECRET=staging-jwt-secret-do-not-use-in-prod
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d

# Internal API Communication
INTERNAL_API_KEY=staging-internal-api-key-secret

# CORS Settings
CORS_ORIGINS=http://localhost:4200,http://localhost:4201,https://staging.webrana.id,https://console.staging.webrana.id,https://admin.staging.webrana.id

# ─────────────────────────────────────────────────────────────────────────────
# Service Configuration
# ─────────────────────────────────────────────────────────────────────────────

# Rate Limiting (Relaxed for Staging)
RATE_LIMIT_TTL=60
RATE_LIMIT_LIMIT=1000

# DigitalOcean (Staging/Mock)
DIGITALOCEAN_API_TOKEN=staging_do_token
DIGITALOCEAN_DEFAULT_REGION=sgp1
ENCRYPTION_KEY=staging_encryption_key_32_bytes_hex

# Payment Gateway (Tripay Sandbox)
TRIPAY_API_KEY=staging_tripay_key
TRIPAY_PRIVATE_KEY=staging_tripay_private
TRIPAY_MERCHANT_CODE=staging_merchant_code
TRIPAY_MODE=sandbox

# Notification (SMTP/Telegram)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=staging_user
SMTP_PASS=staging_pass
SMTP_FROM=noreply@staging.webrana.id
TELEGRAM_BOT_TOKEN=staging_telegram_token

# ─────────────────────────────────────────────────────────────────────────────
# Service URLs (Internal Docker Network)
# ─────────────────────────────────────────────────────────────────────────────
API_GATEWAY_URL=http://api-gateway:3000
AUTH_SERVICE_URL=http://auth-service:3001
CATALOG_SERVICE_URL=http://catalog-service:3002
ORDER_SERVICE_URL=http://order-service:3003
BILLING_SERVICE_URL=http://billing-service:3004
INSTANCE_SERVICE_URL=http://instance-service:3005
NOTIFICATION_SERVICE_URL=http://notification-service:3006

# ─────────────────────────────────────────────────────────────────────────────
# Frontend Configuration
# ─────────────────────────────────────────────────────────────────────────────
NEXT_PUBLIC_API_URL=https://api.staging.webrana.id
NEXT_PUBLIC_WS_URL=wss://api.staging.webrana.id
NEXT_PUBLIC_LANDING_URL=https://staging.webrana.id
NEXT_PUBLIC_CONSOLE_URL=https://console.staging.webrana.id
NEXT_PUBLIC_STRIPE_KEY=pk_test_staging
